# Ticket Breakdown
We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**


Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".


You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

The first ticket would be about understanding the business logic of the use case to see understand the behaivor and how clients currently use this feature.

[1] Deep dive on Database schema and relations
Action: Understand the current situation on how this feature operates on the system, how it is invoked, what kind of operations it performs and verify for side effects (if any).
Time: 12 hours.

[2] Update on Agent schema
Action: Add a new column on Agent table to store the custom Agent-ID generated by the facility. It would be a string typed by the user concatenated with the current agent id on the database or other unique key; That way we could have the multiple custom keys "equal" for different facilities but at the backend side of it, we would know who that key belongs to using a parsing algorithim that uses the original agent ID to bind the custom ID to that user.
Time: 18 hours.
Acceptance:
- Key + Agent ID should be unique on the Table.
- Custom key could repeat for agents in different facilities.
- Custom key should not repeat for agents in same facility.

[3] Dependencies refactor
Action: Refactor the use cases from where those keys are used to now use the custom key. That can be done in the service level or the database level. An RFC approach to the solution should help decide whats best for the given cenario.
Time: 26 hours.
Acceptance:
- Use cases for generating reports should use now the custom key.
- Methods invocation should use the custom key.